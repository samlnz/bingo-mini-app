<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo Game - Choose Your Cards</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <header class="dashboard-header">
            <h1><i class="fas fa-bingo-ball"></i> Mega Bingo</h1>
            <div class="user-info" id="userInfo">
                <span class="user-name">Loading...</span>
            </div>
        </header>

        <div class="timer-container">
            <div class="timer-circle">
                <svg width="120" height="120">
                    <circle class="timer-bg" cx="60" cy="60" r="54"></circle>
                    <circle class="timer-progress" cx="60" cy="60" r="54"></circle>
                </svg>
                <div class="timer-text">
                    <span id="timer">60</span>
                    <span>seconds left</span>
                </div>
            </div>
            <p class="timer-message">Choose up to 2 bingo cards within 1 minute</p>
        </div>

        <div class="selection-info">
            <div class="selected-count">
                <i class="fas fa-ticket-alt"></i>
                <span>Selected: <span id="selectedCount">0</span>/2</span>
            </div>
            <button class="btn-clear" id="clearSelection">
                <i class="fas fa-trash-alt"></i> Clear Selection
            </button>
        </div>

        <div class="cards-grid-container">
            <div class="grid-controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="number" id="cardSearch" placeholder="Search card number..." min="1" max="500">
                </div>
                <div class="grid-info">
                    Cards: 1-500
                </div>
            </div>
            
            <div class="cards-grid" id="cardsGrid">
                <!-- Cards will be generated by JavaScript -->
            </div>
            
            <div class="pagination" id="pagination">
                <button class="page-btn" id="prevPage"><i class="fas fa-chevron-left"></i></button>
                <span class="page-info">Page <span id="currentPage">1</span> of 25</span>
                <button class="page-btn" id="nextPage"><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>

        <div class="action-buttons">
            <button class="btn-start" id="startGame" disabled>
                <i class="fas fa-play-circle"></i> Start Game
                <span class="btn-subtext">Requires 1-2 cards selected</span>
            </button>
            <button class="btn-auto" id="autoSelect">
                <i class="fas fa-robot"></i> Auto-Select Cards
            </button>
        </div>

        <div class="rules-panel">
            <h3><i class="fas fa-info-circle"></i> Game Rules</h3>
            <ul>
                <li>Each player can select 1-2 bingo cards</li>
                <li>Selection time: 1 minute</li>
                <li>Win by completing any line (horizontal, vertical, or diagonal)</li>
                <li>Automatically detect wins or click "BINGO" button</li>
                <li>Up to 500 players can join</li>
            </ul>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Initialize Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand(); // Expand the app to full screen
        tg.BackButton.hide();
        
        // Display user info
        const user = tg.initDataUnsafe?.user;
        if (user) {
            document.getElementById('userInfo').innerHTML = `
                <img src="${user.photo_url || ''}" class="user-avatar" onerror="this.style.display='none'">
                <span class="user-name">${user.first_name || 'Player'}</span>
            `;
            localStorage.setItem('telegramUser', JSON.stringify({
                id: user.id,
                firstName: user.first_name,
                username: user.username
            }));
        }
    </script>
</body>
</html>