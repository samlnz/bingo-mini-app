<!DOCTYPE html>
<html>
<head>
    <title>Bingo Game</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial;
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: white;
            color: black;
            padding: 20px;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 400px;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
        }
        .balance {
            font-size: 36px;
            color: green;
            margin: 20px 0;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px;
            margin: 10px;
            border-radius: 5px;
            width: 90%;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background: #0056b3;
        }
        .bingo-card {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            margin: 20px;
        }
        .bingo-cell {
            background: #f0f0f0;
            border: 1px solid #ccc;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .free {
            background: gold;
        }
    </style>
</head>
<body>
    <h1>ðŸŽ² BINGO GAME ðŸŽ²</h1>
    
    <div class="container">
        <h2>Welcome!</h2>
        <div id="userName">Loading...</div>
        <div class="balance">$<span id="balance">0.00</span></div>
        
        <button onclick="showCard()">ðŸŽ¯ Show My Card</button>
        <button onclick="deposit()">ðŸ’° Deposit</button>
        <button onclick="withdraw()">ðŸ’¸ Withdraw</button>
        <button onclick="joinGame()">ðŸŽ® Join Game</button>
    </div>
    
    <div class="container" id="cardContainer" style="display:none;">
        <h2>Your Bingo Card</h2>
        <div class="bingo-card" id="bingoCard">
            <!-- Card will be generated here -->
        </div>
        <button onclick="hideCard()">Close</button>
    </div>
    
    <script>
        // Telegram Web App initialization
        let tg = window.Telegram.WebApp;
        
        // Expand to full screen
        tg.expand();
        
        // Get user data from Telegram
        const user = tg.initDataUnsafe.user;
        document.getElementById('userName').innerText = `Hello, ${user.first_name}!`;
        
        // Load user balance from your server
        async function loadBalance() {
            // This is where you connect to your Python bot
            const response = await fetch(`YOUR_SERVER_URL/api/balance?user_id=${user.id}`);
            const data = await response.json();
            document.getElementById('balance').innerText = data.balance.toFixed(2);
        }
        
        // Generate bingo card
        function generateBingoCard() {
            const card = document.getElementById('bingoCard');
            card.innerHTML = '';
            
            // BINGO letters
            const letters = ['B', 'I', 'N', 'G', 'O'];
            const ranges = [
                {min: 1, max: 15},
                {min: 16, max: 30},
                {min: 31, max: 45},
                {min: 46, max: 60},
                {min: 61, max: 75}
            ];
            
            // Generate numbers
            for(let i = 0; i < 5; i++) {
                for(let j = 0; j < 5; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'bingo-cell';
                    
                    if(i === 2 && j === 2) {
                        cell.innerText = 'FREE';
                        cell.className += ' free';
                    } else {
                        // Generate random number for this column
                        const numbers = [];
                        for(let k = ranges[j].min; k <= ranges[j].max; k++) {
                            numbers.push(k);
                        }
                        // Shuffle and pick
                        const randomNum = numbers[Math.floor(Math.random() * numbers.length)];
                        cell.innerText = randomNum;
                    }
                    
                    card.appendChild(cell);
                }
            }
        }
        
        // Button functions
        function showCard() {
            generateBingoCard();
            document.getElementById('cardContainer').style.display = 'block';
        }
        
        function hideCard() {
            document.getElementById('cardContainer').style.display = 'none';
        }
        
        function deposit() {
            // Send data to bot
            tg.sendData(JSON.stringify({
                action: 'deposit',
                user_id: user.id
            }));
            tg.close();
        }
        
        function withdraw() {
            tg.sendData(JSON.stringify({
                action: 'withdraw',
                user_id: user.id
            }));
            tg.close();
        }
        
        function joinGame() {
            tg.sendData(JSON.stringify({
                action: 'join_game',
                user_id: user.id
            }));
            tg.close();
        }
        
        // Load balance when page opens
        loadBalance();
    </script>
</body>
</html>